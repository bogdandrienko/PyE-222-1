"use strict";(self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[]).push([[423],{4423:function(t,e,o){o.r(e),o.d(e,{default:function(){return x}});var a=o(3396),s=o(9242);const n=t=>((0,a.dD)("data-v-578af466"),t=t(),(0,a.Cn)(),t),r={class:"size form-control my-3 p-3 bg-primary-subtle"},l={class:"btn-group mb-3","role-group":""},i={class:"form-floating mb-3"},u=n((()=>(0,a._)("label",{for:"floatingInput 1"},"Имя пользователя!",-1))),d={class:"form-floating input-group"},p=["type"],c=n((()=>(0,a._)("i",{class:"bi bi-eye"},null,-1))),m=[c],h=n((()=>(0,a._)("label",{for:"floatingInput 2"},"Пароль",-1))),f=n((()=>(0,a._)("button",{class:"btn btn-outline-primary mt-3 w-25",type:"submit"},"Войти",-1))),w={class:"form-floating mb-3"},b=n((()=>(0,a._)("label",{for:"floatingInput 3"},"Имя пользователя!",-1))),g={class:"form-floating mb-3"},y=n((()=>(0,a._)("label",{for:"floatingInput 4"},"Почта",-1))),_={class:"form-floating input-group"},v=["type"],k=n((()=>(0,a._)("i",{class:"bi bi-eye"},null,-1))),M=[k],I=n((()=>(0,a._)("label",{for:"floatingInput 5"},"Пароль",-1))),C=n((()=>(0,a._)("button",{class:"btn btn-outline-primary mt-3",type:"submit"},"Зарегистрироваться",-1)));function P(t,e,o,n,c,k){return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",l,[(0,a._)("button",{class:"btn btn-outline-secondary",onClick:e[0]||(e[0]=(0,s.iM)((t=>k.switchForm("login")),["prevent"]))},"Войти"),(0,a._)("button",{class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=(0,s.iM)((t=>k.switchForm("register")),["prevent"]))},"Зарегистрироваться")]),c.loginFormVisible?((0,a.wg)(),(0,a.iD)("form",{key:0,onSubmit:e[5]||(e[5]=(0,s.iM)(((...t)=>k.authentificate&&k.authentificate(...t)),["prevent"]))},[(0,a._)("div",i,[(0,a.wy)((0,a._)("input",{id:"floatingInput 1",class:"form-control",type:"text",placeholder:"Имя пользователя","onUpdate:modelValue":e[2]||(e[2]=t=>c.username=t)},null,512),[[s.nr,c.username]]),u]),(0,a._)("div",d,[(0,a.wy)((0,a._)("input",{id:"floatingInput 2",class:"form-control",type:c.showPassword?"text":"password",placeholder:"Имя пользователя","onUpdate:modelValue":e[3]||(e[3]=t=>c.password=t)},null,8,p),[[s.YZ,c.password]]),(0,a._)("button",{class:"btn btn-outline-secondary",onClick:e[4]||(e[4]=(0,s.iM)(((...t)=>k.showHide&&k.showHide(...t)),["prevent"]))},m),h]),f],32)):((0,a.wg)(),(0,a.iD)("form",{key:1,onSubmit:e[11]||(e[11]=(0,s.iM)(((...t)=>k.registrate&&k.registrate(...t)),["prevent"]))},[(0,a._)("div",w,[(0,a.wy)((0,a._)("input",{id:"floatingInput 3",class:"form-control",type:"text",placeholder:"Имя пользователя","onUpdate:modelValue":e[6]||(e[6]=t=>c.username=t)},null,512),[[s.nr,c.username]]),b]),(0,a._)("div",g,[(0,a.wy)((0,a._)("input",{type:"email",class:"form-control",id:"floatingInput 4",placeholder:"Почта","onUpdate:modelValue":e[7]||(e[7]=t=>c.email=t)},null,512),[[s.nr,c.email]]),y]),(0,a._)("div",_,[(0,a.wy)((0,a._)("input",{id:"floatingInput 5",class:"form-control",type:c.showPassword?"text":"password",placeholder:"Имя пользователя","onUpdate:modelValue":e[8]||(e[8]=t=>c.password=t)},null,8,v),[[s.YZ,c.password]]),(0,a._)("button",{class:"btn btn-outline-secondary",onClick:e[9]||(e[9]=(0,s.iM)(((...t)=>k.showHide&&k.showHide(...t)),["prevent"]))},M),(0,a._)("button",{class:"btn btn-outline-info",onClick:e[10]||(e[10]=(0,s.iM)(((...t)=>k.makePassword&&k.makePassword(...t)),["prevent"]))},"Генерировать пароль"),I]),C],32))])}o(560);var V=o(1076),F=o(4460),H={data(){return{password:"",username:"",email:"",showPassword:!1,loginFormVisible:!0}},methods:{switchForm(t){this.loginFormVisible="login"===t},async authentificate(){try{const t=await V.Z.post("http://127.0.0.1:8000/api/token/",{username:this.username,password:this.password},{headers:{"Content-Type":"application/json"}});localStorage.setItem("accessToken",t.data.access),localStorage.setItem("refreshToken",t.data.refresh),F.M.username.value=this.username,this.$router.push({name:"Home"})}catch(t){console.error("Authentication failed:",t)}},async registrate(){try{const t=await V.Z.post("http://127.0.0.1:8000/registrate/",{username:this.username,password:this.password,email:this.email},{headers:{"Content-Type":"application/json"}});console.log(t),this.$router.push({name:"Home"})}catch(t){alert(t.response.data.message)}},makePassword(){const t=Math.floor(9*Math.random())+8,e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",o="abcdefghijklmnopqrstuvwxyz",a="0123456789",s="@!#";let n="";while(n.length<t){const r=Math.random()<.5?e:o,l=r[Math.floor(Math.random()*r.length)];0===n.length||Math.random()<.25?n+=a[Math.floor(Math.random()*a.length)]:n.length<t&&(n+=s[Math.floor(Math.random()*s.length)]),n+=l}this.loginFormVisible?this.password="":this.password=n},showHide(){this.showPassword=!this.showPassword}},created(){this.makePassword()}},U=o(89);const Z=(0,U.Z)(H,[["render",P],["__scopeId","data-v-578af466"]]);var x=Z}}]);
//# sourceMappingURL=423.769bfcf8.js.map